#!/bin/bash
#
# Make all file systems read/write.
#

rw=rw
while (( $# > 0 )); do
    arg=$1; shift
    case "$arg" in
      (--read-only | -r) rw=ro ;;
      (--) break ;;
      (*)
        echo >&2 "${0##*/}: unexpected argument '$arg'"
        exit 1
        ;;
    esac
done

exit=0
for fs in / /persist /opt/Bose; do
    mount -oremount,$rw "$@" "$fs" || exit=1
done
exit $exit
