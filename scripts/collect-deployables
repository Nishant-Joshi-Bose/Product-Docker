#!/bin/bash
#
# Add build outputs to the deploy directory for ElectricCommander.
# See EC/deploy.txt.
#

if (( $# != 2 )); then
    echo >&2 "usage: $0 builds-dir deploy-dir"
    exit 1
fi
builds_dir=$1; shift
deploy_dir=$1; shift

rm -rf "$deploy_dir"
mkdir -p "$deploy_dir" || exit

files=(
    "$builds_dir/product.ipk"
    "$builds_dir/product-unstripped.tar.gz"
    "$builds_dir/product-ipk-stage/component-info.gz"
    "$builds_dir/components.svgz"
    "$builds_dir/package/product.tar"
    "$builds_dir/product_update.zip"
    "$builds_dir/product_update_with_hsp.zip"
    "$builds_dir/package/product_flash"
    "$builds_dir/package/product_flash.exe"
    "$builds_dir/package/product_flash_mac"
    "$builds_dir/lpm_updater.ipk"
    "$builds_dir/monaco.ipk"
    "$builds_dir/Packages.gz"
)

mv "${files[@]}" "$deploy_dir" || exit
